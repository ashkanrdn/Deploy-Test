<!DOCTYPE html>
<html>
<head>
	<title>AMPS</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
	<link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			// get the temperature status element
			var temperatureStatus = $("#temperature-status");

			// function to update the temperature status
			function updateTemperatureStatus() {
				$.ajax({
					url: "/temperature",
					type: "GET",
					success: function(data) {
						temperatureStatus.text(data.temperature + " Â°C");
					},
					error: function() {
						temperatureStatus.text("Error");
					}
				});
			}

			// update the temperature status every minute
			// TODO uncomment if we have the info
			// setInterval(updateTemperatureStatus, 1000);
		});
	</script>
	<script>

	$(document).ready(function() {
		// function to update the light level
		function updateLightStatus(level) {
			$.ajax({
				type: 'POST',
				url: '/update_light_status',
				data: JSON.stringify({'status': light_status}),
				contentType: 'application/json',
				success: function(response) {
					console.log(response);
				},
				error: function(error) {
					console.log(error);
				}
			});
		}

		// function to update the fan speed
		function updateFanSpeed(speed) {
			$.ajax({
				type: 'POST',
				url: '/update_fan_status',
				data: JSON.stringify({'status': fan_status}),
				contentType: 'application/json',
				success: function(response) {
					console.log(response);
				},
				error: function(error) {
					console.log(error);
				}
			});
		}

		// function to handle changes to the light slider
		// function to handle changes to the light toggle
		$('#light-toggle').on('change', function() {
			var light_status = $(this).is(':checked');
			updateLightStatus(light_status);
		});

		// function to handle changes to the fan slider
		$('#fan-toggle').on('change', function() {
			var fan_status = $(this).is(':checked');
			updateFanStatus(fan_status);
		});
	});
	</script>
</head>
<body>
    <div class="container">
		<h1>AMPS</h1>

    </div>

    <nav class="nav-bar">
        <ul>
			<li><a class="nav-link" href="/">Home</a></li>
			<li><a class="nav-link" href="/schedule">Schedule</a></li>
		</ul>
    </nav>
	<div class="container">
    <table>
        <th>  
		<div class="col">

				<div class="row">
					<div class=slider-container sty>
					<label for="light-toggle" class="status-label">Light Status</label>
					<label class="switch" >
						<input type="checkbox" id="light-toggle" {% if light_status %}checked{% endif %}>
						<span class="slider round"></span>
					</label>
					</div>
				</div>


				<div class="row">
					<div class=slider-container>
	
						<label for="fan-toggle" class="status-label">Fan Speed</label>
						<label class="switch">
							<input type="checkbox" {% if fan_status %}checked{% endif %}>
							<span class="slider round"></span>
						</label>
					</div>
				</div>
				
            </div>
        </div></th>
		<th>
			<div class="col">
				<div class="row">
					<div class=slider-container>
	
						<label for="irr-toggle" class="status-label">Irrigation Cycle</label>
						<label >
							<form action="/irg/run" method="post">
								<input type="hidden" id="type" name="type" value="IRG">
								<lable for="duration" class="status-label">Duration</lable>
								<span><input type="text" id="duration" name="duration", placeholder="15"></span>
								<!-- <select id="level" name="level">
									<option value="1">Level 1</option>
									<option value="2">Level 2</option>
									<option value="3">Level 3</option>
									<option value="4">Level 4</option>
								</select> -->
								<span><input type="submit" value="run" style="inline"></span>
				
							</form>
						
						</label>
					</div>
            	</div>

			</div>
		</th>
        <th>
		<div class="col">
            <div class="control-container">
				<div class="row">
					<label for="light" class="status-label">Light Schedule</label>
					<ul id="light-schedule">
						<li class="time-list"><span>8:00 AM</span> - <span>8:00 PM</span></li>
						<li class="time-list"><span>9:00 AM</span> - <span>7:00 PM</span></li>
					</ul>
				</div>
				<div class="row">
					<label for="light" class="status-label">Fan Schedule</label>
					<ul id="light-schedule">
						<li class="time-list"><span>8:00 AM</span> - <span>8:00 PM</span></li>
						<li class="time-list"><span>9:00 AM</span> - <span>7:00 PM</span></li>
					</ul>
				</div>
				<div class="row">
					<label for="light" class="status-label">Irrigation Schedule</label>
					<ul id="light-schedule">
						<li class="time-list"><span>8:00 AM</span> - <span>5 Seconds</span></li>
						<li class="time-list"><span>9:00 AM</span> - <span>5 Seconds</span></li>
					</ul>
				</div>
			</div>
        </div>  
	</div>
  </th>
   </table>
</body>
</html>
